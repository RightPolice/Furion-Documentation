---
id: db
title: 2. Db 静态类
sidebar_label: 2. Db 静态类
---

import Tag from "@site/src/components/Tag.js";

<details>
  <summary>📝 模块更新日志</summary>
  <div>
<div>

- **新特性**

  - &nbsp;<Tag>新增</Tag> `Db.GetNewDbContext()` 多个重载方法，实现类似 `new DbContext()` 操作 <sup>4.8.8.55</sup> <sup>⏱️2023.11.09</sup> [4157629](https://gitee.com/dotnetchina/Furion/commit/41576295473fefc47f6961154909a690d7c5ed58)

</div>
  </div>
</details>

## 2.1 获取非泛型仓储

```cs showLineNumbers 
var repository = Db.GetRepository();
```

## 2.2 获取泛型仓储

```cs showLineNumbers 
var entityRepository = Db.GetRepository<TEntity>();
```

## 2.3 获取带定位器泛型仓储

```cs showLineNumbers 
var locatorRepository = Db.GetRepository<TEntity, TDbContextLocator>();
```

## 2.4 获取 `Sql` 仓储

```cs showLineNumbers 
var sqlRepository = Db.GetSqlRepository();
```

## 2.5 获取 `Sql` 定位器仓储

```cs showLineNumbers 
var sqlLocatorRepository = Db.GetSqlRepository<TDbContextLocator>();
```

## 2.6 获取 `Sql` 代理对象

```cs showLineNumbers 
var sqlProxy= Db.GetSqlProxy<TSqlDispatchProxy>();
```

## 2.7 获取默认数据库上下文

```cs showLineNumbers 
var dbContext = Db.GetDbContext();
```

## 2.8 获取定位器数据库上下文

```cs showLineNumbers 
var locatorDbContext = Db.GetDbContext<TDbContextLocator>();
var locatorDbContext2 = Db.GetDbContext(typeof(TDbContextLocator));
```

## 2.9 创建新的默认数据库上下文

```cs showLineNumbers 
using var dbContext = Db.GetNewDbContext(); // 别忘记 using，Furion 4.8.8.55+ 版本有效
```

## 2.10 创建新的定位器数据库上下文

```cs showLineNumbers 
using var locatorDbContext = Db.GetNewDbContext<TDbContextLocator>(); // 别忘记 using，Furion 4.8.8.55+ 版本有效
using var locatorDbContext2 = Db.GetNewDbContext(typeof(TDbContextLocator)); // 别忘记 using，Furion 4.8.8.55+ 版本有效
```

## 2.11 根据定位器类型获取仓储

```cs showLineNumbers 
var repository = Db.GetRepository<TEntity>(dbContextLocatorType);
```

## 2.12 获取 `主从库` 仓储

```cs showLineNumbers 
var msRepository = Db.GetMSRepository();
```

## 2.13 获取 `Sql` 主库定位器仓储

```cs showLineNumbers 
var msLocatorRepository = Db.GetMSRepository<TMasterDbContextLocator>();
```

## 2.14 获取特定定位器仓储

```cs showLineNumbers 
var msLocatorRepository = Db.GetDbRepository<TDbContextLocator>();
```