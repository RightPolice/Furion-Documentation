---
id: template
title: 2.6 官方脚手架
sidebar_label: 2.6 官方脚手架
description: 快速创建生产级项目解决方案
---

import useBaseUrl from "@docusaurus/useBaseUrl";

import Tag from "@site/src/components/Tag.js";

<details>
  <summary>📝 模块更新日志</summary>
  <div>
<div>

- **突破性变化**

  - &nbsp;<Tag>升级</Tag> **脚手架支持创建 `.NET8 Preview.1` 项目** <sup>4.8.7</sup> <sup>⏱️2023.02.22</sup>

- **问题修复**

  - &nbsp;<Tag>修复</Tag> `Blazor` 脚手架出现 `blazor.server.js` 不能加载问题（`404`） <sup>4.8.7.13</sup> <sup>⏱️2023.03.16</sup> [#I6NOBQ](https://gitee.com/dotnetchina/Furion/issues/I6NOBQ)

- **其他更改**

  - &nbsp;<Tag>调整</Tag> `Blazor` + `WebAPI` 脚手架模板，默认添加授权支持 <sup>4.8.7.37</sup> <sup>⏱️2023.04.07</sup> [#I6OM8O](https://gitee.com/dotnetchina/Furion/issues/I6OM8O) [544f80d](https://gitee.com/dotnetchina/Furion/commit/544f80dbd7c800e28d9c4137e1c3bfc289c14177)
  - &nbsp;<Tag>调整</Tag> 脚手架模板，默认启用主流文件类型 `MIME` 支持 <sup>4.8.7.5</sup> <sup>⏱️2023.03.07</sup> [e35cdab](https://gitee.com/dotnetchina/Furion/commit/e35cdab592d1a00ff32b08c566c4ed5d6ddcff24)

</div>
  </div>
</details>

:::important 特别说明

**脚手架不是安装在项目中的！** 而是通过 `CMD` 或 `PowerShell` 安装到操作系统中的。

:::

## 2.6.1 脚手架

`Furion` 官方提供了多种 `Web` 应用类型的脚手架，方便大家快速创建多层架构项目。目前支持以下应用脚手架：

### 2.6.1.1 `Furion + EFCore`

|                                                                 模板类型                                                                 | 名称                             | 版本                                                                                                                                                                 | 关键词                 | 描述                   |
| :--------------------------------------------------------------------------------------------------------------------------------------: | -------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- | ---------------------- |
|       [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.Mvc/)        | Furion.Template.Mvc              | [![nuget](https://img.shields.io/nuget/v/Furion.Template.Mvc.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.Mvc/)                           | 👉 **furionmvc**       | Mvc 模板               |
|       [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.Api/)        | Furion.Template.Api              | [![nuget](https://img.shields.io/nuget/v/Furion.Template.Api.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.Api/)                           | 👉 **furionapi**       | WebApi 模板            |
|       [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.App/)        | Furion.Template.App              | [![nuget](https://img.shields.io/nuget/v/Furion.Template.App.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.App/)                           | 👉 **furionapp**       | Mvc/WebApi 模板        |
|      [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.Razor/)       | Furion.Template.Razor            | [![nuget](https://img.shields.io/nuget/v/Furion.Template.Razor.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.Razor/)                       | 👉 **furionrazor**     | RazorPages 模板        |
| [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.RazorWithWebApi/)  | Furion.Template.RazorWithWebApi  | [![nuget](https://img.shields.io/nuget/v/Furion.Template.RazorWithWebApi.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.RazorWithWebApi/)   | 👉 **furionrazorapi**  | RazorPages/WebApi 模板 |
|      [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.Blazor/)      | Furion.Template.Blazor           | [![nuget](https://img.shields.io/nuget/v/Furion.Template.Blazor.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.Blazor/)                     | 👉 **furionblazor**    | Blazor 模板            |
| [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.Template.BlazorWithWebApi/) | Furion.Template.BlazorWithWebApi | [![nuget](https://img.shields.io/nuget/v/Furion.Template.BlazorWithWebApi.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.Template.BlazorWithWebApi/) | 👉 **furionblazorapi** | Blazor/WebApi 模板     |

### 2.6.1.2 `Furion + SqlSugar`

|                                                                     模板类型                                                                      | 名称                                      | 版本                                                                                                                                                                                   | 关键词             | 描述                   |
| :-----------------------------------------------------------------------------------------------------------------------------------------------: | ----------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------ | ---------------------- |
|       [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Mvc/)        | Furion.SqlSugar.Template.Mvc              | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.Mvc.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Mvc/)                           | 👉 **fsmvc**       | Mvc 模板               |
|       [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Api/)        | Furion.SqlSugar.Template.Api              | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.Api.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Api/)                           | 👉 **fsapi**       | WebApi 模板            |
|       [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.App/)        | Furion.SqlSugar.Template.App              | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.App.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.App/)                           | 👉 **fsapp**       | Mvc/WebApi 模板        |
|      [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Razor/)       | Furion.SqlSugar.Template.Razor            | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.Razor.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Razor/)                       | 👉 **fsrazor**     | RazorPages 模板        |
| [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.RazorWithWebApi/)  | Furion.SqlSugar.Template.RazorWithWebApi  | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.RazorWithWebApi.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.RazorWithWebApi/)   | 👉 **fsrazorapi**  | RazorPages/WebApi 模板 |
|      [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Blazor/)      | Furion.SqlSugar.Template.Blazor           | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.Blazor.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.Blazor/)                     | 👉 **fsblazor**    | Blazor 模板            |
| [![nuget](https://shields.io/badge/-NuGet-yellow?cacheSeconds=604800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.BlazorWithWebApi/) | Furion.SqlSugar.Template.BlazorWithWebApi | [![nuget](https://img.shields.io/nuget/v/Furion.SqlSugar.Template.BlazorWithWebApi.svg?cacheSeconds=10800)](https://www.nuget.org/packages/Furion.SqlSugar.Template.BlazorWithWebApi/) | 👉 **fsblazorapi** | Blazor/WebApi 模板     |

## 2.6.2 安装脚手架

打开 `CMD` 或 `Powershell` 执行模板安装命令（旧版本 `install` 可换成 `--install`）：

### 2.6.2.1 `Furion + EFCore` 脚手架安装

```bash showLineNumbers
# Mvc 模板
dotnet new install Furion.Template.Mvc::4.9.1.7
# WebApi 模板
dotnet new install Furion.Template.Api::4.9.1.7
# Mvc/WebApi 模板
dotnet new install Furion.Template.App::4.9.1.7
# RazorPages 模板
dotnet new install Furion.Template.Razor::4.9.1.7
# RazorPages/WebApi 模板
dotnet new install Furion.Template.RazorWithWebApi::4.9.1.7
# Blazor 模板
dotnet new install Furion.Template.Blazor::4.9.1.7
# Blazor/WebApi 模板
dotnet new install Furion.Template.BlazorWithWebAPI::4.9.1.7
```

:::note 最新版安装

不带版本号总是安装最新的版本。

:::

### 2.6.2.2 `Furion + SqlSugar` 脚手架安装

```bash showLineNumbers
# Mvc 模板
dotnet new install Furion.SqlSugar.Template.Mvc::4.9.1.7
# WebApi 模板
dotnet new install Furion.SqlSugar.Template.Api::4.9.1.7
# Mvc/WebApi 模板
dotnet new install Furion.SqlSugar.Template.App::4.9.1.7
# RazorPages 模板
dotnet new install Furion.SqlSugar.Template.Razor::4.9.1.7
# RazorPages/WebApi 模板
dotnet new install Furion.SqlSugar.Template.RazorWithWebApi::4.9.1.7
# Blazor 模板
dotnet new install Furion.SqlSugar.Template.Blazor::4.9.1.7
# Blazor/WebApi 模板
dotnet new install Furion.SqlSugar.Template.BlazorWithWebAPI::4.9.1.7
```

:::note 最新版安装

不带版本号总是安装最新的版本。

:::

:::tip `SqlSugar` 脚手架基本使用

在 `SqlSugar` 脚手架中，`Core` 层包含了一个 `DbContext.cs` 类，可通过 `DbContext.Instance` 就可以获取到 `SqlSugarScope` 对象。

数据库链接字符串在启动层 `appsettings.json` 文件的 `ConnectionConfigs` 节点中配置，对应的是 `SqlSugar` 中的 `ConnectionConfig[]` 对象。

:::

## 2.6.3 使用脚手架

```bash showLineNumbers {2,5-8,11-14}
# 命令模板如下
dotnet new 关键词 -n 项目名称 -f .NET版本

# EFCore：支持创建 .NET5-8 版本
dotnet new furionapi -n MyProject -f net5
dotnet new furionapi -n MyProject -f net6
dotnet new furionapi -n MyProject -f net7
dotnet new furionapi -n MyProject -f net8

# SqlSugar：支持创建 .NET5-8 版本
dotnet new fsapi -n MyProject -f net5
dotnet new fsapi -n MyProject -f net6
dotnet new fsapi -n MyProject -f net7
dotnet new fsapi -n MyProject -f net8
```

这样就可以生成项目代码了，**生成之后推荐将所有的 `nuget` 包更新到最新版本。**

:::tip 关于项目名称和 `.NET` 版本

通过脚手架生成的项目名称不能包含 `短横线` 等特殊字符，如有该需求，可在生成之后通过 `Visual Studio` 进行手动修改。

`-f` 版本参数所有选项：`net5`，`net6`，`net7`，`net8`，默认是 `net8`。

:::

:::important 特别提醒

`furionapi` 对应的是上面列表的 `关键词`，我们也可以通过 `dotnet new --list` 查看。

想了解更多可以使用 `dotnet new 关键词 --help` 查看更多参数。

:::

## 2.6.4 脚手架更新

只需要重新安装最新版替换即可，如：

```bash showLineNumbers
dotnet new install Furion.Template.Api::4.9.1.7
```

:::note 最新版安装

不带版本号总是安装最新的版本。

:::

## 2.6.5 `Visual Studio` 集成

通过命令安装脚手架后，升级 `Visual Studio` 到最新版可使用可视化方式创建哦。

<img src={useBaseUrl("img/ksh.png")} />

## 2.6.6 `关于 MVC 添加区域出错问题`

由于 `Furion` 底层依赖了 `Microsoft.CodeAnalysis.CSharp` 包，所以可能通过 `Viusal Studio` 的界面添加 `Area 区域` 时会出错，这时候只需要在 `Web.Entry` 层安装下面几个包即可：

- `Microsoft.CodeAnalysis.CSharp.Features`
- `Microsoft.CodeAnalysis.CSharp.Scripting`
- `Microsoft.CodeAnalysis.VisualBasic.Features`
- `Microsoft.CodeAnalysis.Workspaces.MSBuild`
- `Microsoft.VisualStudio.Web.CodeGeneration.Design`

## 2.6.7 搭建脚手架

脚手架可以极大的提高我们搭建新项目的速度，推荐两篇文章给大家学习：

[https://www.cnblogs.com/laozhang-is-phi/p/10205495.html](https://www.cnblogs.com/laozhang-is-phi/p/10205495.html)

[https://www.cnblogs.com/catcher1994/p/10061470.html](https://www.cnblogs.com/catcher1994/p/10061470.html)

**推荐直接拷贝 `Furion` 脚手架文件夹进行修改，可避免很多问题。**

[Furion 脚手架源码](https://gitee.com/dotnetchina/Furion/tree/v4/templates)

## 2.6.8 反馈与建议

:::note 与我们交流

给 Furion 提 [Issue](https://gitee.com/dotnetchina/Furion/issues/new?issue)。

:::

---

:::note 了解更多

想了解更多 `模板知识` 知识可查阅 [dotnet-new 模板](https://docs.microsoft.com/zh-cn/dotnet/core/tools/dotnet-new) 章节。

:::
